mimarmuratdemir.com {
	# Compression
	encode zstd gzip

	# API requests to backend
	handle /api/* {
		reverse_proxy backend:8080
	}

	# All other requests to frontend (excluding ACME challenge)
	# Caddy automatically handles /.well-known/acme-challenge/* for Let's Encrypt
	# We exclude it from frontend proxy so Caddy's built-in handler can work
	@not_acme {
		not path /.well-known/acme-challenge/*
	}
	handle @not_acme {
		reverse_proxy frontend:80
	}

	# Security headers
	header {
		X-Content-Type-Options "nosniff"
		X-Frame-Options "DENY"
		X-XSS-Protection "1; mode=block"
		Referrer-Policy "no-referrer"
		Strict-Transport-Security "max-age=31536000; includeSubDomains; preload"
	}

	# Logging
	log {
		output stdout
		format console
	}
}
